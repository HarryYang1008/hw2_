{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Owner\\\\Desktop\\\\h2\\\\hw2\\\\hw\\\\src\\\\App.js\";\nimport React from 'react';\nimport './App.css'; // IMPORT DATA MANAGEMENT AND TRANSACTION STUFF\n\nimport DBManager from './db/DBManager';\nimport jsTPS from './common/jsTPS.js'; // OUR TRANSACTIONS\n\nimport MoveSong_Transaction from './transactions/MoveSong_Transaction.js'; // THESE REACT COMPONENTS ARE MODALS\n\nimport DeleteListModal from './components/DeleteListModal.js'; // THESE REACT COMPONENTS ARE IN OUR UI\n\nimport Banner from './components/Banner.js';\nimport EditToolbar from './components/EditToolbar.js';\nimport PlaylistCards from './components/PlaylistCards.js';\nimport SidebarHeading from './components/SidebarHeading.js';\nimport SidebarList from './components/SidebarList.js';\nimport Statusbar from './components/Statusbar.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props); // THIS IS OUR TRANSACTION PROCESSING SYSTEM\n\n    this.sortKeyNamePairsByName = keyNamePairs => {\n      keyNamePairs.sort((keyPair1, keyPair2) => {\n        // GET THE LISTS\n        return keyPair1.name.localeCompare(keyPair2.name);\n      });\n    };\n\n    this.createNewList = () => {\n      // FIRST FIGURE OUT WHAT THE NEW LIST'S KEY AND NAME WILL BE\n      let newKey = this.state.sessionData.nextKey;\n      let newName = \"Untitled\" + newKey; // MAKE THE NEW LIST\n\n      let newList = {\n        key: newKey,\n        name: newName,\n        songs: []\n      }; // MAKE THE KEY,NAME OBJECT SO WE CAN KEEP IT IN OUR\n      // SESSION DATA SO IT WILL BE IN OUR LIST OF LISTS\n\n      let newKeyNamePair = {\n        \"key\": newKey,\n        \"name\": newName\n      };\n      let updatedPairs = [...this.state.sessionData.keyNamePairs, newKeyNamePair];\n      this.sortKeyNamePairsByName(updatedPairs); // CHANGE THE APP STATE SO THAT THE CURRENT LIST IS\n      // THIS NEW LIST AND UPDATE THE SESSION DATA SO THAT THE\n      // NEXT LIST CAN BE MADE AS WELL. NOTE, THIS setState WILL\n      // FORCE A CALL TO render, BUT THIS UPDATE IS ASYNCHRONOUS,\n      // SO ANY AFTER EFFECTS THAT NEED TO USE THIS UPDATED STATE\n      // SHOULD BE DONE VIA ITS CALLBACK\n\n      this.setState(prevState => ({\n        listKeyPairMarkedForDeletion: prevState.listKeyPairMarkedForDeletion,\n        currentList: newList,\n        sessionData: {\n          nextKey: prevState.sessionData.nextKey + 1,\n          counter: prevState.sessionData.counter + 1,\n          keyNamePairs: updatedPairs\n        }\n      }), () => {\n        // PUTTING THIS NEW LIST IN PERMANENT STORAGE\n        // IS AN AFTER EFFECT\n        this.db.mutationCreateList(newList); // SO IS STORING OUR SESSION DATA\n\n        this.db.mutationUpdateSessionData(this.state.sessionData);\n      });\n    };\n\n    this.deleteList = key => {\n      // IF IT IS THE CURRENT LIST, CHANGE THAT\n      let newCurrentList = null;\n\n      if (this.state.currentList) {\n        if (this.state.currentList.key !== key) {\n          // THIS JUST MEANS IT'S NOT THE CURRENT LIST BEING\n          // DELETED SO WE'LL KEEP THE CURRENT LIST AS IT IS\n          newCurrentList = this.state.currentList;\n        }\n      }\n\n      let keyIndex = this.state.sessionData.keyNamePairs.findIndex(keyNamePair => {\n        return keyNamePair.key === key;\n      });\n      let newKeyNamePairs = [...this.state.sessionData.keyNamePairs];\n      if (keyIndex >= 0) newKeyNamePairs.splice(keyIndex, 1); // AND FROM OUR APP STATE\n\n      this.setState(prevState => ({\n        listKeyPairMarkedForDeletion: null,\n        currentList: newCurrentList,\n        sessionData: {\n          nextKey: prevState.sessionData.nextKey,\n          counter: prevState.sessionData.counter - 1,\n          keyNamePairs: newKeyNamePairs\n        }\n      }), () => {\n        // DELETING THE LIST FROM PERMANENT STORAGE\n        // IS AN AFTER EFFECT\n        this.db.mutationDeleteList(key); // SO IS STORING OUR SESSION DATA\n\n        this.db.mutationUpdateSessionData(this.state.sessionData);\n      });\n    };\n\n    this.deleteMarkedList = () => {\n      this.deleteList(this.state.listKeyPairMarkedForDeletion.key);\n      this.hideDeleteListModal();\n    };\n\n    this.deleteCurrentList = () => {\n      if (this.state.currentList) {\n        this.deleteList(this.state.currentList.key);\n      }\n    };\n\n    this.renameList = (key, newName) => {\n      let newKeyNamePairs = [...this.state.sessionData.keyNamePairs]; // NOW GO THROUGH THE ARRAY AND FIND THE ONE TO RENAME\n\n      for (let i = 0; i < newKeyNamePairs.length; i++) {\n        let pair = newKeyNamePairs[i];\n\n        if (pair.key === key) {\n          pair.name = newName;\n        }\n      }\n\n      this.sortKeyNamePairsByName(newKeyNamePairs); // WE MAY HAVE TO RENAME THE currentList\n\n      let currentList = this.state.currentList;\n\n      if (currentList.key === key) {\n        currentList.name = newName;\n      }\n\n      this.setState(prevState => ({\n        listKeyPairMarkedForDeletion: null,\n        sessionData: {\n          nextKey: prevState.sessionData.nextKey,\n          counter: prevState.sessionData.counter,\n          keyNamePairs: newKeyNamePairs\n        }\n      }), () => {\n        // AN AFTER EFFECT IS THAT WE NEED TO MAKE SURE\n        // THE TRANSACTION STACK IS CLEARED\n        let list = this.db.queryGetList(key);\n        list.name = newName;\n        this.db.mutationUpdateList(list);\n        this.db.mutationUpdateSessionData(this.state.sessionData);\n      });\n    };\n\n    this.loadList = key => {\n      let newCurrentList = this.db.queryGetList(key);\n      this.setState(prevState => ({\n        listKeyPairMarkedForDeletion: prevState.listKeyPairMarkedForDeletion,\n        currentList: newCurrentList,\n        sessionData: this.state.sessionData\n      }), () => {\n        // AN AFTER EFFECT IS THAT WE NEED TO MAKE SURE\n        // THE TRANSACTION STACK IS CLEARED\n        this.tps.clearAllTransactions();\n      });\n    };\n\n    this.closeCurrentList = () => {\n      this.setState(prevState => ({\n        listKeyPairMarkedForDeletion: prevState.listKeyPairMarkedForDeletion,\n        currentList: null,\n        sessionData: this.state.sessionData\n      }), () => {\n        // AN AFTER EFFECT IS THAT WE NEED TO MAKE SURE\n        // THE TRANSACTION STACK IS CLEARED\n        this.tps.clearAllTransactions();\n      });\n    };\n\n    this.getPlaylistSize = () => {\n      return this.state.currentList.songs.length;\n    };\n\n    this.addMoveSongTransaction = (start, end) => {\n      let transaction = new MoveSong_Transaction(this, start, end);\n      this.tps.addTransaction(transaction);\n    };\n\n    this.undo = () => {\n      if (this.tps.hasTransactionToUndo()) {\n        this.tps.undoTransaction(); // MAKE SURE THE LIST GETS PERMANENTLY UPDATED\n\n        this.db.mutationUpdateList(this.state.currentList);\n      }\n    };\n\n    this.redo = () => {\n      if (this.tps.hasTransactionToRedo()) {\n        this.tps.doTransaction(); // MAKE SURE THE LIST GETS PERMANENTLY UPDATED\n\n        this.db.mutationUpdateList(this.state.currentList);\n      }\n    };\n\n    this.markListForDeletion = keyPair => {\n      this.setState(prevState => ({\n        currentList: prevState.currentList,\n        listKeyPairMarkedForDeletion: keyPair,\n        sessionData: prevState.sessionData\n      }), () => {\n        // PROMPT THE USER\n        this.showDeleteListModal();\n      });\n    };\n\n    this.tps = new jsTPS(); // THIS WILL TALK TO LOCAL STORAGE\n\n    this.db = new DBManager(); // GET THE SESSION DATA FROM OUR DATA MANAGER\n\n    let loadedSessionData = this.db.queryGetSessionData(); // SETUP THE INITIAL STATE\n\n    this.state = {\n      listKeyPairMarkedForDeletion: null,\n      currentList: null,\n      sessionData: loadedSessionData\n    };\n  }\n\n  setStateWithUpdatedList(list) {\n    this.setState(prevState => ({\n      listKeyPairMarkedForDeletion: prevState.listKeyPairMarkedForDeletion,\n      currentList: list,\n      sessionData: this.state.sessionData\n    }), () => {\n      // UPDATING THE LIST IN PERMANENT STORAGE\n      // IS AN AFTER EFFECT\n      this.db.mutationUpdateList(this.state.currentList);\n    });\n  }\n\n  // THIS FUNCTION MOVES A SONG IN THE CURRENT LIST FROM\n  // start TO end AND ADJUSTS ALL OTHER ITEMS ACCORDINGLY\n  moveSong(start, end) {\n    let list = this.state.currentList; // WE NEED TO UPDATE THE STATE FOR THE APP\n\n    start -= 1;\n    end -= 1;\n\n    if (start < end) {\n      let temp = list.songs[start];\n\n      for (let i = start; i < end; i++) {\n        list.songs[i] = list.songs[i + 1];\n      }\n\n      list.songs[end] = temp;\n    } else if (start > end) {\n      let temp = list.songs[start];\n\n      for (let i = start; i > end; i--) {\n        list.songs[i] = list.songs[i - 1];\n      }\n\n      list.songs[end] = temp;\n    }\n\n    this.setStateWithUpdatedList(list);\n  } // THIS FUNCTION ADDS A MoveSong_Transaction TO THE TRANSACTION STACK\n\n\n  // THIS FUNCTION SHOWS THE MODAL FOR PROMPTING THE USER\n  // TO SEE IF THEY REALLY WANT TO DELETE THE LIST\n  showDeleteListModal() {\n    let modal = document.getElementById(\"delete-list-modal\");\n    modal.classList.add(\"is-visible\");\n  } // THIS FUNCTION IS FOR HIDING THE MODAL\n\n\n  hideDeleteListModal() {\n    let modal = document.getElementById(\"delete-list-modal\");\n    modal.classList.remove(\"is-visible\");\n  }\n\n  render() {\n    let canAddSong = this.state.currentList !== null;\n    let canUndo = this.tps.hasTransactionToUndo();\n    let canRedo = this.tps.hasTransactionToRedo();\n    let canClose = this.state.currentList !== null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"root\",\n      children: [/*#__PURE__*/_jsxDEV(Banner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SidebarHeading, {\n        createNewListCallback: this.createNewList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SidebarList, {\n        currentList: this.state.currentList,\n        keyNamePairs: this.state.sessionData.keyNamePairs,\n        deleteListCallback: this.markListForDeletion,\n        loadListCallback: this.loadList,\n        renameListCallback: this.renameList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(EditToolbar, {\n        canAddSong: canAddSong,\n        canUndo: canUndo,\n        canRedo: canRedo,\n        canClose: canClose,\n        undoCallback: this.undo,\n        redoCallback: this.redo,\n        closeCallback: this.closeCurrentList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PlaylistCards, {\n        currentList: this.state.currentList,\n        moveSongCallback: this.addMoveSongTransaction\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Statusbar, {\n        currentList: this.state.currentList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DeleteListModal, {\n        listKeyPair: this.state.listKeyPairMarkedForDeletion,\n        hideDeleteListModalCallback: this.hideDeleteListModal,\n        deleteListCallback: this.deleteMarkedList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"names":["React","DBManager","jsTPS","MoveSong_Transaction","DeleteListModal","Banner","EditToolbar","PlaylistCards","SidebarHeading","SidebarList","Statusbar","App","Component","constructor","props","sortKeyNamePairsByName","keyNamePairs","sort","keyPair1","keyPair2","name","localeCompare","createNewList","newKey","state","sessionData","nextKey","newName","newList","key","songs","newKeyNamePair","updatedPairs","setState","prevState","listKeyPairMarkedForDeletion","currentList","counter","db","mutationCreateList","mutationUpdateSessionData","deleteList","newCurrentList","keyIndex","findIndex","keyNamePair","newKeyNamePairs","splice","mutationDeleteList","deleteMarkedList","hideDeleteListModal","deleteCurrentList","renameList","i","length","pair","list","queryGetList","mutationUpdateList","loadList","tps","clearAllTransactions","closeCurrentList","getPlaylistSize","addMoveSongTransaction","start","end","transaction","addTransaction","undo","hasTransactionToUndo","undoTransaction","redo","hasTransactionToRedo","doTransaction","markListForDeletion","keyPair","showDeleteListModal","loadedSessionData","queryGetSessionData","setStateWithUpdatedList","moveSong","temp","modal","document","getElementById","classList","add","remove","render","canAddSong","canUndo","canRedo","canClose"],"sources":["C:/Users/Owner/Desktop/h2/hw2/hw/src/App.js"],"sourcesContent":["import React from 'react';\nimport './App.css';\n\n// IMPORT DATA MANAGEMENT AND TRANSACTION STUFF\nimport DBManager from './db/DBManager';\nimport jsTPS from './common/jsTPS.js';\n\n// OUR TRANSACTIONS\nimport MoveSong_Transaction from './transactions/MoveSong_Transaction.js';\n\n// THESE REACT COMPONENTS ARE MODALS\nimport DeleteListModal from './components/DeleteListModal.js';\n\n// THESE REACT COMPONENTS ARE IN OUR UI\nimport Banner from './components/Banner.js';\nimport EditToolbar from './components/EditToolbar.js';\nimport PlaylistCards from './components/PlaylistCards.js';\nimport SidebarHeading from './components/SidebarHeading.js';\nimport SidebarList from './components/SidebarList.js';\nimport Statusbar from './components/Statusbar.js';\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n\n        // THIS IS OUR TRANSACTION PROCESSING SYSTEM\n        this.tps = new jsTPS();\n\n        // THIS WILL TALK TO LOCAL STORAGE\n        this.db = new DBManager();\n\n        // GET THE SESSION DATA FROM OUR DATA MANAGER\n        let loadedSessionData = this.db.queryGetSessionData();\n\n        // SETUP THE INITIAL STATE\n        this.state = {\n            listKeyPairMarkedForDeletion : null,\n            currentList : null,\n            sessionData : loadedSessionData\n        }\n    }\n    sortKeyNamePairsByName = (keyNamePairs) => {\n        keyNamePairs.sort((keyPair1, keyPair2) => {\n            // GET THE LISTS\n            return keyPair1.name.localeCompare(keyPair2.name);\n        });\n    }\n    // THIS FUNCTION BEGINS THE PROCESS OF CREATING A NEW LIST\n    createNewList = () => {\n        // FIRST FIGURE OUT WHAT THE NEW LIST'S KEY AND NAME WILL BE\n        let newKey = this.state.sessionData.nextKey;\n        let newName = \"Untitled\" + newKey;\n\n        // MAKE THE NEW LIST\n        let newList = {\n            key: newKey,\n            name: newName,\n            songs: []\n        };\n\n        // MAKE THE KEY,NAME OBJECT SO WE CAN KEEP IT IN OUR\n        // SESSION DATA SO IT WILL BE IN OUR LIST OF LISTS\n        let newKeyNamePair = { \"key\": newKey, \"name\": newName };\n        let updatedPairs = [...this.state.sessionData.keyNamePairs, newKeyNamePair];\n        this.sortKeyNamePairsByName(updatedPairs);\n\n        // CHANGE THE APP STATE SO THAT THE CURRENT LIST IS\n        // THIS NEW LIST AND UPDATE THE SESSION DATA SO THAT THE\n        // NEXT LIST CAN BE MADE AS WELL. NOTE, THIS setState WILL\n        // FORCE A CALL TO render, BUT THIS UPDATE IS ASYNCHRONOUS,\n        // SO ANY AFTER EFFECTS THAT NEED TO USE THIS UPDATED STATE\n        // SHOULD BE DONE VIA ITS CALLBACK\n        this.setState(prevState => ({\n            listKeyPairMarkedForDeletion : prevState.listKeyPairMarkedForDeletion,\n            currentList: newList,\n            sessionData: {\n                nextKey: prevState.sessionData.nextKey + 1,\n                counter: prevState.sessionData.counter + 1,\n                keyNamePairs: updatedPairs\n            }\n        }), () => {\n            // PUTTING THIS NEW LIST IN PERMANENT STORAGE\n            // IS AN AFTER EFFECT\n            this.db.mutationCreateList(newList);\n\n            // SO IS STORING OUR SESSION DATA\n            this.db.mutationUpdateSessionData(this.state.sessionData);\n        });\n    }\n    // THIS FUNCTION BEGINS THE PROCESS OF DELETING A LIST.\n    deleteList = (key) => {\n        // IF IT IS THE CURRENT LIST, CHANGE THAT\n        let newCurrentList = null;\n        if (this.state.currentList) {\n            if (this.state.currentList.key !== key) {\n                // THIS JUST MEANS IT'S NOT THE CURRENT LIST BEING\n                // DELETED SO WE'LL KEEP THE CURRENT LIST AS IT IS\n                newCurrentList = this.state.currentList;\n            }\n        }\n\n        let keyIndex = this.state.sessionData.keyNamePairs.findIndex((keyNamePair) => {\n            return (keyNamePair.key === key);\n        });\n        let newKeyNamePairs = [...this.state.sessionData.keyNamePairs];\n        if (keyIndex >= 0)\n            newKeyNamePairs.splice(keyIndex, 1);\n\n        // AND FROM OUR APP STATE\n        this.setState(prevState => ({\n            listKeyPairMarkedForDeletion : null,\n            currentList: newCurrentList,\n            sessionData: {\n                nextKey: prevState.sessionData.nextKey,\n                counter: prevState.sessionData.counter - 1,\n                keyNamePairs: newKeyNamePairs\n            }\n        }), () => {\n            // DELETING THE LIST FROM PERMANENT STORAGE\n            // IS AN AFTER EFFECT\n            this.db.mutationDeleteList(key);\n\n            // SO IS STORING OUR SESSION DATA\n            this.db.mutationUpdateSessionData(this.state.sessionData);\n        });\n    }\n    deleteMarkedList = () => {\n        this.deleteList(this.state.listKeyPairMarkedForDeletion.key);\n        this.hideDeleteListModal();\n    }\n    // THIS FUNCTION SPECIFICALLY DELETES THE CURRENT LIST\n    deleteCurrentList = () => {\n        if (this.state.currentList) {\n            this.deleteList(this.state.currentList.key);\n        }\n    }\n    renameList = (key, newName) => {\n        let newKeyNamePairs = [...this.state.sessionData.keyNamePairs];\n        // NOW GO THROUGH THE ARRAY AND FIND THE ONE TO RENAME\n        for (let i = 0; i < newKeyNamePairs.length; i++) {\n            let pair = newKeyNamePairs[i];\n            if (pair.key === key) {\n                pair.name = newName;\n            }\n        }\n        this.sortKeyNamePairsByName(newKeyNamePairs);\n\n        // WE MAY HAVE TO RENAME THE currentList\n        let currentList = this.state.currentList;\n        if (currentList.key === key) {\n            currentList.name = newName;\n        }\n\n        this.setState(prevState => ({\n            listKeyPairMarkedForDeletion : null,\n            sessionData: {\n                nextKey: prevState.sessionData.nextKey,\n                counter: prevState.sessionData.counter,\n                keyNamePairs: newKeyNamePairs\n            }\n        }), () => {\n            // AN AFTER EFFECT IS THAT WE NEED TO MAKE SURE\n            // THE TRANSACTION STACK IS CLEARED\n            let list = this.db.queryGetList(key);\n            list.name = newName;\n            this.db.mutationUpdateList(list);\n            this.db.mutationUpdateSessionData(this.state.sessionData);\n        });\n    }\n    // THIS FUNCTION BEGINS THE PROCESS OF LOADING A LIST FOR EDITING\n    loadList = (key) => {\n        let newCurrentList = this.db.queryGetList(key);\n        this.setState(prevState => ({\n            listKeyPairMarkedForDeletion : prevState.listKeyPairMarkedForDeletion,\n            currentList: newCurrentList,\n            sessionData: this.state.sessionData\n        }), () => {\n            // AN AFTER EFFECT IS THAT WE NEED TO MAKE SURE\n            // THE TRANSACTION STACK IS CLEARED\n            this.tps.clearAllTransactions();\n        });\n    }\n    // THIS FUNCTION BEGINS THE PROCESS OF CLOSING THE CURRENT LIST\n    closeCurrentList = () => {\n        this.setState(prevState => ({\n            listKeyPairMarkedForDeletion : prevState.listKeyPairMarkedForDeletion,\n            currentList: null,\n            sessionData: this.state.sessionData\n        }), () => {\n            // AN AFTER EFFECT IS THAT WE NEED TO MAKE SURE\n            // THE TRANSACTION STACK IS CLEARED\n            this.tps.clearAllTransactions();\n        });\n    }\n    setStateWithUpdatedList(list) {\n        this.setState(prevState => ({\n            listKeyPairMarkedForDeletion : prevState.listKeyPairMarkedForDeletion,\n            currentList : list,\n            sessionData : this.state.sessionData\n        }), () => {\n            // UPDATING THE LIST IN PERMANENT STORAGE\n            // IS AN AFTER EFFECT\n            this.db.mutationUpdateList(this.state.currentList);\n        });\n    }\n    getPlaylistSize = () => {\n        return this.state.currentList.songs.length;\n    }\n    // THIS FUNCTION MOVES A SONG IN THE CURRENT LIST FROM\n    // start TO end AND ADJUSTS ALL OTHER ITEMS ACCORDINGLY\n    moveSong(start, end) {\n        let list = this.state.currentList;\n\n        // WE NEED TO UPDATE THE STATE FOR THE APP\n        start -= 1;\n        end -= 1;\n        if (start < end) {\n            let temp = list.songs[start];\n            for (let i = start; i < end; i++) {\n                list.songs[i] = list.songs[i + 1];\n            }\n            list.songs[end] = temp;\n        }\n        else if (start > end) {\n            let temp = list.songs[start];\n            for (let i = start; i > end; i--) {\n                list.songs[i] = list.songs[i - 1];\n            }\n            list.songs[end] = temp;\n        }\n        this.setStateWithUpdatedList(list);\n    }\n    // THIS FUNCTION ADDS A MoveSong_Transaction TO THE TRANSACTION STACK\n    addMoveSongTransaction = (start, end) => {\n        let transaction = new MoveSong_Transaction(this, start, end);\n        this.tps.addTransaction(transaction);\n    }\n    // THIS FUNCTION BEGINS THE PROCESS OF PERFORMING AN UNDO\n    undo = () => {\n        if (this.tps.hasTransactionToUndo()) {\n            this.tps.undoTransaction();\n\n            // MAKE SURE THE LIST GETS PERMANENTLY UPDATED\n            this.db.mutationUpdateList(this.state.currentList);\n        }\n    }\n    // THIS FUNCTION BEGINS THE PROCESS OF PERFORMING A REDO\n    redo = () => {\n        if (this.tps.hasTransactionToRedo()) {\n            this.tps.doTransaction();\n\n            // MAKE SURE THE LIST GETS PERMANENTLY UPDATED\n            this.db.mutationUpdateList(this.state.currentList);\n        }\n    }\n    markListForDeletion = (keyPair) => {\n        this.setState(prevState => ({\n            currentList: prevState.currentList,\n            listKeyPairMarkedForDeletion : keyPair,\n            sessionData: prevState.sessionData\n        }), () => {\n            // PROMPT THE USER\n            this.showDeleteListModal();\n        });\n    }\n    // THIS FUNCTION SHOWS THE MODAL FOR PROMPTING THE USER\n    // TO SEE IF THEY REALLY WANT TO DELETE THE LIST\n    showDeleteListModal() {\n        let modal = document.getElementById(\"delete-list-modal\");\n        modal.classList.add(\"is-visible\");\n    }\n    // THIS FUNCTION IS FOR HIDING THE MODAL\n    hideDeleteListModal() {\n        let modal = document.getElementById(\"delete-list-modal\");\n        modal.classList.remove(\"is-visible\");\n    }\n    render() {\n        let canAddSong = this.state.currentList !== null;\n        let canUndo = this.tps.hasTransactionToUndo();\n        let canRedo = this.tps.hasTransactionToRedo();\n        let canClose = this.state.currentList !== null;\n        return (\n            <div id=\"root\">\n                <Banner />\n                <SidebarHeading\n                    createNewListCallback={this.createNewList}\n                />\n                <SidebarList\n                    currentList={this.state.currentList}\n                    keyNamePairs={this.state.sessionData.keyNamePairs}\n                    deleteListCallback={this.markListForDeletion}\n                    loadListCallback={this.loadList}\n                    renameListCallback={this.renameList}\n                />\n                <EditToolbar\n                    canAddSong={canAddSong}\n                    canUndo={canUndo}\n                    canRedo={canRedo}\n                    canClose={canClose} \n                    undoCallback={this.undo}\n                    redoCallback={this.redo}\n                    closeCallback={this.closeCurrentList}\n                />\n                <PlaylistCards\n                    currentList={this.state.currentList}\n                    moveSongCallback={this.addMoveSongTransaction} />\n                <Statusbar \n                    currentList={this.state.currentList} />\n                <DeleteListModal\n                    listKeyPair={this.state.listKeyPairMarkedForDeletion}\n                    hideDeleteListModalCallback={this.hideDeleteListModal}\n                    deleteListCallback={this.deleteMarkedList}\n                />\n            </div>\n        );\n    }\n}\n\nexport default App;\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP,C,CAEA;;AACA,OAAOC,SAAP,MAAsB,gBAAtB;AACA,OAAOC,KAAP,MAAkB,mBAAlB,C,CAEA;;AACA,OAAOC,oBAAP,MAAiC,wCAAjC,C,CAEA;;AACA,OAAOC,eAAP,MAA4B,iCAA5B,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,WAAP,MAAwB,6BAAxB;AACA,OAAOC,aAAP,MAA0B,+BAA1B;AACA,OAAOC,cAAP,MAA2B,gCAA3B;AACA,OAAOC,WAAP,MAAwB,6BAAxB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;;;AAEA,MAAMC,GAAN,SAAkBX,KAAK,CAACY,SAAxB,CAAkC;EAC9BC,WAAW,CAACC,KAAD,EAAQ;IACf,MAAMA,KAAN,EADe,CAGf;;IAHe,KAmBnBC,sBAnBmB,GAmBOC,YAAD,IAAkB;MACvCA,YAAY,CAACC,IAAb,CAAkB,CAACC,QAAD,EAAWC,QAAX,KAAwB;QACtC;QACA,OAAOD,QAAQ,CAACE,IAAT,CAAcC,aAAd,CAA4BF,QAAQ,CAACC,IAArC,CAAP;MACH,CAHD;IAIH,CAxBkB;;IAAA,KA0BnBE,aA1BmB,GA0BH,MAAM;MAClB;MACA,IAAIC,MAAM,GAAG,KAAKC,KAAL,CAAWC,WAAX,CAAuBC,OAApC;MACA,IAAIC,OAAO,GAAG,aAAaJ,MAA3B,CAHkB,CAKlB;;MACA,IAAIK,OAAO,GAAG;QACVC,GAAG,EAAEN,MADK;QAEVH,IAAI,EAAEO,OAFI;QAGVG,KAAK,EAAE;MAHG,CAAd,CANkB,CAYlB;MACA;;MACA,IAAIC,cAAc,GAAG;QAAE,OAAOR,MAAT;QAAiB,QAAQI;MAAzB,CAArB;MACA,IAAIK,YAAY,GAAG,CAAC,GAAG,KAAKR,KAAL,CAAWC,WAAX,CAAuBT,YAA3B,EAAyCe,cAAzC,CAAnB;MACA,KAAKhB,sBAAL,CAA4BiB,YAA5B,EAhBkB,CAkBlB;MACA;MACA;MACA;MACA;MACA;;MACA,KAAKC,QAAL,CAAcC,SAAS,KAAK;QACxBC,4BAA4B,EAAGD,SAAS,CAACC,4BADjB;QAExBC,WAAW,EAAER,OAFW;QAGxBH,WAAW,EAAE;UACTC,OAAO,EAAEQ,SAAS,CAACT,WAAV,CAAsBC,OAAtB,GAAgC,CADhC;UAETW,OAAO,EAAEH,SAAS,CAACT,WAAV,CAAsBY,OAAtB,GAAgC,CAFhC;UAGTrB,YAAY,EAAEgB;QAHL;MAHW,CAAL,CAAvB,EAQI,MAAM;QACN;QACA;QACA,KAAKM,EAAL,CAAQC,kBAAR,CAA2BX,OAA3B,EAHM,CAKN;;QACA,KAAKU,EAAL,CAAQE,yBAAR,CAAkC,KAAKhB,KAAL,CAAWC,WAA7C;MACH,CAfD;IAgBH,CAlEkB;;IAAA,KAoEnBgB,UApEmB,GAoELZ,GAAD,IAAS;MAClB;MACA,IAAIa,cAAc,GAAG,IAArB;;MACA,IAAI,KAAKlB,KAAL,CAAWY,WAAf,EAA4B;QACxB,IAAI,KAAKZ,KAAL,CAAWY,WAAX,CAAuBP,GAAvB,KAA+BA,GAAnC,EAAwC;UACpC;UACA;UACAa,cAAc,GAAG,KAAKlB,KAAL,CAAWY,WAA5B;QACH;MACJ;;MAED,IAAIO,QAAQ,GAAG,KAAKnB,KAAL,CAAWC,WAAX,CAAuBT,YAAvB,CAAoC4B,SAApC,CAA+CC,WAAD,IAAiB;QAC1E,OAAQA,WAAW,CAAChB,GAAZ,KAAoBA,GAA5B;MACH,CAFc,CAAf;MAGA,IAAIiB,eAAe,GAAG,CAAC,GAAG,KAAKtB,KAAL,CAAWC,WAAX,CAAuBT,YAA3B,CAAtB;MACA,IAAI2B,QAAQ,IAAI,CAAhB,EACIG,eAAe,CAACC,MAAhB,CAAuBJ,QAAvB,EAAiC,CAAjC,EAhBc,CAkBlB;;MACA,KAAKV,QAAL,CAAcC,SAAS,KAAK;QACxBC,4BAA4B,EAAG,IADP;QAExBC,WAAW,EAAEM,cAFW;QAGxBjB,WAAW,EAAE;UACTC,OAAO,EAAEQ,SAAS,CAACT,WAAV,CAAsBC,OADtB;UAETW,OAAO,EAAEH,SAAS,CAACT,WAAV,CAAsBY,OAAtB,GAAgC,CAFhC;UAGTrB,YAAY,EAAE8B;QAHL;MAHW,CAAL,CAAvB,EAQI,MAAM;QACN;QACA;QACA,KAAKR,EAAL,CAAQU,kBAAR,CAA2BnB,GAA3B,EAHM,CAKN;;QACA,KAAKS,EAAL,CAAQE,yBAAR,CAAkC,KAAKhB,KAAL,CAAWC,WAA7C;MACH,CAfD;IAgBH,CAvGkB;;IAAA,KAwGnBwB,gBAxGmB,GAwGA,MAAM;MACrB,KAAKR,UAAL,CAAgB,KAAKjB,KAAL,CAAWW,4BAAX,CAAwCN,GAAxD;MACA,KAAKqB,mBAAL;IACH,CA3GkB;;IAAA,KA6GnBC,iBA7GmB,GA6GC,MAAM;MACtB,IAAI,KAAK3B,KAAL,CAAWY,WAAf,EAA4B;QACxB,KAAKK,UAAL,CAAgB,KAAKjB,KAAL,CAAWY,WAAX,CAAuBP,GAAvC;MACH;IACJ,CAjHkB;;IAAA,KAkHnBuB,UAlHmB,GAkHN,CAACvB,GAAD,EAAMF,OAAN,KAAkB;MAC3B,IAAImB,eAAe,GAAG,CAAC,GAAG,KAAKtB,KAAL,CAAWC,WAAX,CAAuBT,YAA3B,CAAtB,CAD2B,CAE3B;;MACA,KAAK,IAAIqC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,eAAe,CAACQ,MAApC,EAA4CD,CAAC,EAA7C,EAAiD;QAC7C,IAAIE,IAAI,GAAGT,eAAe,CAACO,CAAD,CAA1B;;QACA,IAAIE,IAAI,CAAC1B,GAAL,KAAaA,GAAjB,EAAsB;UAClB0B,IAAI,CAACnC,IAAL,GAAYO,OAAZ;QACH;MACJ;;MACD,KAAKZ,sBAAL,CAA4B+B,eAA5B,EAT2B,CAW3B;;MACA,IAAIV,WAAW,GAAG,KAAKZ,KAAL,CAAWY,WAA7B;;MACA,IAAIA,WAAW,CAACP,GAAZ,KAAoBA,GAAxB,EAA6B;QACzBO,WAAW,CAAChB,IAAZ,GAAmBO,OAAnB;MACH;;MAED,KAAKM,QAAL,CAAcC,SAAS,KAAK;QACxBC,4BAA4B,EAAG,IADP;QAExBV,WAAW,EAAE;UACTC,OAAO,EAAEQ,SAAS,CAACT,WAAV,CAAsBC,OADtB;UAETW,OAAO,EAAEH,SAAS,CAACT,WAAV,CAAsBY,OAFtB;UAGTrB,YAAY,EAAE8B;QAHL;MAFW,CAAL,CAAvB,EAOI,MAAM;QACN;QACA;QACA,IAAIU,IAAI,GAAG,KAAKlB,EAAL,CAAQmB,YAAR,CAAqB5B,GAArB,CAAX;QACA2B,IAAI,CAACpC,IAAL,GAAYO,OAAZ;QACA,KAAKW,EAAL,CAAQoB,kBAAR,CAA2BF,IAA3B;QACA,KAAKlB,EAAL,CAAQE,yBAAR,CAAkC,KAAKhB,KAAL,CAAWC,WAA7C;MACH,CAdD;IAeH,CAlJkB;;IAAA,KAoJnBkC,QApJmB,GAoJP9B,GAAD,IAAS;MAChB,IAAIa,cAAc,GAAG,KAAKJ,EAAL,CAAQmB,YAAR,CAAqB5B,GAArB,CAArB;MACA,KAAKI,QAAL,CAAcC,SAAS,KAAK;QACxBC,4BAA4B,EAAGD,SAAS,CAACC,4BADjB;QAExBC,WAAW,EAAEM,cAFW;QAGxBjB,WAAW,EAAE,KAAKD,KAAL,CAAWC;MAHA,CAAL,CAAvB,EAII,MAAM;QACN;QACA;QACA,KAAKmC,GAAL,CAASC,oBAAT;MACH,CARD;IASH,CA/JkB;;IAAA,KAiKnBC,gBAjKmB,GAiKA,MAAM;MACrB,KAAK7B,QAAL,CAAcC,SAAS,KAAK;QACxBC,4BAA4B,EAAGD,SAAS,CAACC,4BADjB;QAExBC,WAAW,EAAE,IAFW;QAGxBX,WAAW,EAAE,KAAKD,KAAL,CAAWC;MAHA,CAAL,CAAvB,EAII,MAAM;QACN;QACA;QACA,KAAKmC,GAAL,CAASC,oBAAT;MACH,CARD;IASH,CA3KkB;;IAAA,KAuLnBE,eAvLmB,GAuLD,MAAM;MACpB,OAAO,KAAKvC,KAAL,CAAWY,WAAX,CAAuBN,KAAvB,CAA6BwB,MAApC;IACH,CAzLkB;;IAAA,KAmNnBU,sBAnNmB,GAmNM,CAACC,KAAD,EAAQC,GAAR,KAAgB;MACrC,IAAIC,WAAW,GAAG,IAAIhE,oBAAJ,CAAyB,IAAzB,EAA+B8D,KAA/B,EAAsCC,GAAtC,CAAlB;MACA,KAAKN,GAAL,CAASQ,cAAT,CAAwBD,WAAxB;IACH,CAtNkB;;IAAA,KAwNnBE,IAxNmB,GAwNZ,MAAM;MACT,IAAI,KAAKT,GAAL,CAASU,oBAAT,EAAJ,EAAqC;QACjC,KAAKV,GAAL,CAASW,eAAT,GADiC,CAGjC;;QACA,KAAKjC,EAAL,CAAQoB,kBAAR,CAA2B,KAAKlC,KAAL,CAAWY,WAAtC;MACH;IACJ,CA/NkB;;IAAA,KAiOnBoC,IAjOmB,GAiOZ,MAAM;MACT,IAAI,KAAKZ,GAAL,CAASa,oBAAT,EAAJ,EAAqC;QACjC,KAAKb,GAAL,CAASc,aAAT,GADiC,CAGjC;;QACA,KAAKpC,EAAL,CAAQoB,kBAAR,CAA2B,KAAKlC,KAAL,CAAWY,WAAtC;MACH;IACJ,CAxOkB;;IAAA,KAyOnBuC,mBAzOmB,GAyOIC,OAAD,IAAa;MAC/B,KAAK3C,QAAL,CAAcC,SAAS,KAAK;QACxBE,WAAW,EAAEF,SAAS,CAACE,WADC;QAExBD,4BAA4B,EAAGyC,OAFP;QAGxBnD,WAAW,EAAES,SAAS,CAACT;MAHC,CAAL,CAAvB,EAII,MAAM;QACN;QACA,KAAKoD,mBAAL;MACH,CAPD;IAQH,CAlPkB;;IAIf,KAAKjB,GAAL,GAAW,IAAI1D,KAAJ,EAAX,CAJe,CAMf;;IACA,KAAKoC,EAAL,GAAU,IAAIrC,SAAJ,EAAV,CAPe,CASf;;IACA,IAAI6E,iBAAiB,GAAG,KAAKxC,EAAL,CAAQyC,mBAAR,EAAxB,CAVe,CAYf;;IACA,KAAKvD,KAAL,GAAa;MACTW,4BAA4B,EAAG,IADtB;MAETC,WAAW,EAAG,IAFL;MAGTX,WAAW,EAAGqD;IAHL,CAAb;EAKH;;EA0JDE,uBAAuB,CAACxB,IAAD,EAAO;IAC1B,KAAKvB,QAAL,CAAcC,SAAS,KAAK;MACxBC,4BAA4B,EAAGD,SAAS,CAACC,4BADjB;MAExBC,WAAW,EAAGoB,IAFU;MAGxB/B,WAAW,EAAG,KAAKD,KAAL,CAAWC;IAHD,CAAL,CAAvB,EAII,MAAM;MACN;MACA;MACA,KAAKa,EAAL,CAAQoB,kBAAR,CAA2B,KAAKlC,KAAL,CAAWY,WAAtC;IACH,CARD;EASH;;EAID;EACA;EACA6C,QAAQ,CAAChB,KAAD,EAAQC,GAAR,EAAa;IACjB,IAAIV,IAAI,GAAG,KAAKhC,KAAL,CAAWY,WAAtB,CADiB,CAGjB;;IACA6B,KAAK,IAAI,CAAT;IACAC,GAAG,IAAI,CAAP;;IACA,IAAID,KAAK,GAAGC,GAAZ,EAAiB;MACb,IAAIgB,IAAI,GAAG1B,IAAI,CAAC1B,KAAL,CAAWmC,KAAX,CAAX;;MACA,KAAK,IAAIZ,CAAC,GAAGY,KAAb,EAAoBZ,CAAC,GAAGa,GAAxB,EAA6Bb,CAAC,EAA9B,EAAkC;QAC9BG,IAAI,CAAC1B,KAAL,CAAWuB,CAAX,IAAgBG,IAAI,CAAC1B,KAAL,CAAWuB,CAAC,GAAG,CAAf,CAAhB;MACH;;MACDG,IAAI,CAAC1B,KAAL,CAAWoC,GAAX,IAAkBgB,IAAlB;IACH,CAND,MAOK,IAAIjB,KAAK,GAAGC,GAAZ,EAAiB;MAClB,IAAIgB,IAAI,GAAG1B,IAAI,CAAC1B,KAAL,CAAWmC,KAAX,CAAX;;MACA,KAAK,IAAIZ,CAAC,GAAGY,KAAb,EAAoBZ,CAAC,GAAGa,GAAxB,EAA6Bb,CAAC,EAA9B,EAAkC;QAC9BG,IAAI,CAAC1B,KAAL,CAAWuB,CAAX,IAAgBG,IAAI,CAAC1B,KAAL,CAAWuB,CAAC,GAAG,CAAf,CAAhB;MACH;;MACDG,IAAI,CAAC1B,KAAL,CAAWoC,GAAX,IAAkBgB,IAAlB;IACH;;IACD,KAAKF,uBAAL,CAA6BxB,IAA7B;EACH,CAlN6B,CAmN9B;;;EAiCA;EACA;EACAqB,mBAAmB,GAAG;IAClB,IAAIM,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,mBAAxB,CAAZ;IACAF,KAAK,CAACG,SAAN,CAAgBC,GAAhB,CAAoB,YAApB;EACH,CAzP6B,CA0P9B;;;EACArC,mBAAmB,GAAG;IAClB,IAAIiC,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,mBAAxB,CAAZ;IACAF,KAAK,CAACG,SAAN,CAAgBE,MAAhB,CAAuB,YAAvB;EACH;;EACDC,MAAM,GAAG;IACL,IAAIC,UAAU,GAAG,KAAKlE,KAAL,CAAWY,WAAX,KAA2B,IAA5C;IACA,IAAIuD,OAAO,GAAG,KAAK/B,GAAL,CAASU,oBAAT,EAAd;IACA,IAAIsB,OAAO,GAAG,KAAKhC,GAAL,CAASa,oBAAT,EAAd;IACA,IAAIoB,QAAQ,GAAG,KAAKrE,KAAL,CAAWY,WAAX,KAA2B,IAA1C;IACA,oBACI;MAAK,EAAE,EAAC,MAAR;MAAA,wBACI,QAAC,MAAD;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI,QAAC,cAAD;QACI,qBAAqB,EAAE,KAAKd;MADhC;QAAA;QAAA;QAAA;MAAA,QAFJ,eAKI,QAAC,WAAD;QACI,WAAW,EAAE,KAAKE,KAAL,CAAWY,WAD5B;QAEI,YAAY,EAAE,KAAKZ,KAAL,CAAWC,WAAX,CAAuBT,YAFzC;QAGI,kBAAkB,EAAE,KAAK2D,mBAH7B;QAII,gBAAgB,EAAE,KAAKhB,QAJ3B;QAKI,kBAAkB,EAAE,KAAKP;MAL7B;QAAA;QAAA;QAAA;MAAA,QALJ,eAYI,QAAC,WAAD;QACI,UAAU,EAAEsC,UADhB;QAEI,OAAO,EAAEC,OAFb;QAGI,OAAO,EAAEC,OAHb;QAII,QAAQ,EAAEC,QAJd;QAKI,YAAY,EAAE,KAAKxB,IALvB;QAMI,YAAY,EAAE,KAAKG,IANvB;QAOI,aAAa,EAAE,KAAKV;MAPxB;QAAA;QAAA;QAAA;MAAA,QAZJ,eAqBI,QAAC,aAAD;QACI,WAAW,EAAE,KAAKtC,KAAL,CAAWY,WAD5B;QAEI,gBAAgB,EAAE,KAAK4B;MAF3B;QAAA;QAAA;QAAA;MAAA,QArBJ,eAwBI,QAAC,SAAD;QACI,WAAW,EAAE,KAAKxC,KAAL,CAAWY;MAD5B;QAAA;QAAA;QAAA;MAAA,QAxBJ,eA0BI,QAAC,eAAD;QACI,WAAW,EAAE,KAAKZ,KAAL,CAAWW,4BAD5B;QAEI,2BAA2B,EAAE,KAAKe,mBAFtC;QAGI,kBAAkB,EAAE,KAAKD;MAH7B;QAAA;QAAA;QAAA;MAAA,QA1BJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ;EAkCH;;AAtS6B;;AAySlC,eAAetC,GAAf"},"metadata":{},"sourceType":"module"}